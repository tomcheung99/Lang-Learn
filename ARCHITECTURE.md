# Lang-Learn æŠ€æœ¯æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**ç›®æ ‡ï¼š** æœˆå…¥ 3000-5000 HKD çš„è¯­è¨€å­¦ä¹  SaaS åº”ç”¨  
**æ ¸å¿ƒåŠŸèƒ½ï¼š** AI ä¾‹å¥ç”Ÿæˆ + ç”¨æˆ·æ”¶è— + å˜ç°ç³»ç»Ÿ  
**æŠ€æœ¯æ ˆï¼š** Next.js + TypeScript + Tailwind + Supabase + WebLLM/OpenRouter

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å‰ç«¯å±‚ (Next.js)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   ä¾‹å¥ç”Ÿæˆ    â”‚  â”‚   ç”¨æˆ·ç•Œé¢    â”‚  â”‚   æ”¶è—/å†å²ç®¡ç†   â”‚   â”‚
â”‚  â”‚  - WebLLM    â”‚  â”‚  - ç™»å½•/æ³¨å†Œ  â”‚  â”‚  - æ”¶è—åˆ—è¡¨      â”‚   â”‚
â”‚  â”‚  - OpenRouterâ”‚  â”‚  - ä¸»é¢˜åˆ‡æ¢   â”‚  â”‚  - Ankiå¯¼å‡º      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API å±‚ (Next.js API)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ /api/generateâ”‚  â”‚ /api/auth/*  â”‚  â”‚ /api/favorites/* â”‚   â”‚
â”‚  â”‚ ä¾‹å¥ç”Ÿæˆæ¥å£  â”‚  â”‚ ç™»å½•éªŒè¯æ¥å£  â”‚  â”‚ æ”¶è—ç®¡ç†æ¥å£     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚/api/payments â”‚  â”‚ /api/webhook â”‚                          â”‚
â”‚  â”‚ æ”¯ä»˜å¤„ç†æ¥å£  â”‚  â”‚  webhookæ¥æ”¶ â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®å±‚ (Supabase)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   users      â”‚  â”‚  favorites   â”‚  â”‚  usage_logs      â”‚   â”‚
â”‚  â”‚  ç”¨æˆ·è¡¨      â”‚  â”‚  æ”¶è—è¡¨      â”‚  â”‚  ä½¿ç”¨è®°å½•è¡¨       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  email_codes â”‚  â”‚ subscriptionsâ”‚                          â”‚
â”‚  â”‚  éªŒè¯ç è¡¨    â”‚  â”‚  è®¢é˜…è¡¨      â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å¤–éƒ¨æœåŠ¡å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  WebLLM      â”‚  â”‚ OpenRouter   â”‚  â”‚  Resend (é‚®ä»¶)   â”‚   â”‚
â”‚  â”‚ æœ¬åœ°AIæ¨¡å‹   â”‚  â”‚ äº‘ç«¯AI API   â”‚  â”‚  éªŒè¯ç å‘é€      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚  Stripe      â”‚  â”‚  AdSense     â”‚                          â”‚
â”‚  â”‚ æ”¯ä»˜å¤„ç†     â”‚  â”‚  å¹¿å‘ŠæŠ•æ”¾    â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡ (Supabase)

### 1. ç”¨æˆ·è¡¨ (users)

```sql
-- ç”¨æˆ·è¡¨ï¼ˆæ— å¯†ç ç™»å½•ï¼‰
create table users (
  id uuid primary key default gen_random_uuid(),
  email text unique not null,
  display_name text,
  avatar_url text,
  is_premium boolean default false,
  daily_quota integer default 10, -- å…è´¹ç”¨æˆ·æ¯æ—¥é™é¢
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- å¯ç”¨ RLS
alter table users enable row level security;

-- ç”¨æˆ·åªèƒ½æŸ¥çœ‹è‡ªå·±çš„æ•°æ®
create policy "Users can view own profile" on users
  for select using (auth.uid() = id);

create policy "Users can update own profile" on users
  for update using (auth.uid() = id);
```

### 2. éªŒè¯ç è¡¨ (email_codes)

```sql
-- é‚®ç®±éªŒè¯ç è¡¨ï¼ˆ10åˆ†é’Ÿæœ‰æ•ˆï¼‰
create table email_codes (
  id uuid primary key default gen_random_uuid(),
  email text not null,
  code text not null, -- 6ä½æ•°å­—
  expires_at timestamptz not null,
  used boolean default false,
  created_at timestamptz default now()
);

-- è‡ªåŠ¨æ¸…ç†è¿‡æœŸéªŒè¯ç çš„å‡½æ•°
create or replace function cleanup_expired_codes()
returns void as $$
begin
  delete from email_codes where expires_at < now();
end;
$$ language plpgsql;

-- æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡æ¸…ç†
create extension if not exists pg_cron;
select cron.schedule('cleanup-codes', '0 * * * *', 'select cleanup_expired_codes()');
```

### 3. æ”¶è—è¡¨ (favorites)

```sql
-- ç”¨æˆ·æ”¶è—è¡¨
create table favorites (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references users(id) on delete cascade not null,
  word text not null,
  sentence_original text not null,
  sentence_translation text not null,
  context text, -- è¯­å¢ƒç±»å‹ï¼šæ—¥å¸¸å¯¹è¯ã€å·¥ä½œåœºæ™¯ç­‰
  lang text not null, -- ja, en, zh
  model text, -- ç”Ÿæˆæ¨¡å‹ï¼šqwen3-4b, gemma-2bç­‰
  tags text[], -- æ ‡ç­¾æ•°ç»„ï¼Œæ–¹ä¾¿åˆ†ç±»
  notes text, -- ç”¨æˆ·ç¬”è®°
  is_exported boolean default false, -- æ˜¯å¦å·²å¯¼å‡ºåˆ°Anki
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- ç´¢å¼•
create index idx_favorites_user_id on favorites(user_id);
create index idx_favorites_word on favorites(word);
create index idx_favorites_lang on favorites(lang);
create index idx_favorites_created on favorites(created_at desc);

-- RLSç­–ç•¥
create policy "Users can view own favorites" on favorites
  for select using (auth.uid() = user_id);

create policy "Users can insert own favorites" on favorites
  for insert with check (auth.uid() = user_id);

create policy "Users can update own favorites" on favorites
  for update using (auth.uid() = user_id);

create policy "Users can delete own favorites" on favorites
  for delete using (auth.uid() = user_id);

-- å…è´¹ç”¨æˆ·é™é¢ï¼šæœ€å¤š100æ¡æ”¶è—
create or replace function check_favorite_limit()
returns trigger as $$
declare
  favorite_count integer;
  user_is_premium boolean;
begin
  -- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä»˜è´¹
  select is_premium into user_is_premium from users where id = new.user_id;
  
  if user_is_premium then
    return new; -- ä»˜è´¹ç”¨æˆ·æ— é™åˆ¶
  end if;
  
  -- æ£€æŸ¥æ”¶è—æ•°é‡
  select count(*) into favorite_count from favorites where user_id = new.user_id;
  
  if favorite_count >= 100 then
    raise exception 'Free users can only save up to 100 favorites. Upgrade to Premium for unlimited.';
  end if;
  
  return new;
end;
$$ language plpgsql;

create trigger check_favorite_limit_trigger
  before insert on favorites
  for each row execute function check_favorite_limit();
```

### 4. ä½¿ç”¨è®°å½•è¡¨ (usage_logs)

```sql
-- ç”¨æˆ·ä½¿ç”¨è®°å½•ï¼ˆç”¨äºç»Ÿè®¡å’Œé™é¢ï¼‰
create table usage_logs (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references users(id) on delete cascade,
  word text not null,
  lang text not null,
  model text not null,
  backend_type text not null, -- webllm, openrouter
  tokens_used integer, -- APIè°ƒç”¨tokenæ•°
  created_at timestamptz default now()
);

-- ç´¢å¼•
create index idx_usage_logs_user_id on usage_logs(user_id);
create index idx_usage_logs_created on usage_logs(created_at);

-- è·å–ç”¨æˆ·ä»Šæ—¥ä½¿ç”¨æ¬¡æ•°çš„å‡½æ•°
create or replace function get_today_usage(user_uuid uuid)
returns integer as $$
begin
  return (
    select count(*) from usage_logs
    where user_id = user_uuid
    and created_at >= date_trunc('day', now())
  );
end;
$$ language plpgsql;
```

### 5. è®¢é˜…è¡¨ (subscriptions)

```sql
-- ç”¨æˆ·è®¢é˜…è¡¨ï¼ˆStripeé›†æˆï¼‰
create table subscriptions (
  id uuid primary key default gen_random_uuid(),
  user_id uuid references users(id) on delete cascade unique not null,
  stripe_customer_id text,
  stripe_subscription_id text,
  status text not null, -- active, canceled, past_due
  price_id text not null,
  current_period_start timestamptz,
  current_period_end timestamptz,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- ç´¢å¼•
create index idx_subscriptions_user_id on subscriptions(user_id);
create index idx_subscriptions_status on subscriptions(status);

-- RLS
create policy "Users can view own subscription" on subscriptions
  for select using (auth.uid() = user_id);
```

---

## ğŸ” è®¤è¯ç³»ç»Ÿæ¶æ„

### æ— å¯†ç ç™»å½•æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     è¾“å…¥é‚®ç®±      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ å‰ç«¯    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼ POST /api/auth/send-code
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ åç«¯    â”‚
                              â”‚ - ç”Ÿæˆ6ä½éªŒè¯ç 
                              â”‚ - å­˜å…¥email_codesè¡¨
                              â”‚ - è°ƒç”¨Resendå‘é€é‚®ä»¶
                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Resend  â”‚
                              â”‚ é‚®ä»¶æœåŠ¡ â”‚
                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                   â”‚ å‘é€éªŒè¯ç é‚®ä»¶
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     è¾“å…¥éªŒè¯ç     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚ å‰ç«¯    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼ POST /api/auth/verify
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ åç«¯    â”‚
                              â”‚ - éªŒè¯éªŒè¯ç 
                              â”‚ - åˆ›å»º/è·å–ç”¨æˆ·
                              â”‚ - ç”ŸæˆJWT token
                              â”‚ - è¿”å›token
                              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  ç”¨æˆ·   â”‚
                              â”‚ å·²ç™»å½•  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API ç«¯ç‚¹è®¾è®¡

```typescript
// 1. å‘é€éªŒè¯ç 
POST /api/auth/send-code
Body: { email: string }
Response: { success: boolean, message: string }

// 2. éªŒè¯éªŒè¯ç å¹¶ç™»å½•
POST /api/auth/verify
Body: { email: string, code: string }
Response: { 
  success: boolean, 
  token: string,
  user: { id, email, display_name, is_premium }
}

// 3. åˆ·æ–°token
POST /api/auth/refresh
Headers: { Authorization: Bearer <token> }
Response: { token: string }

// 4. ç™»å‡º
POST /api/auth/logout
Headers: { Authorization: Bearer <token> }
Response: { success: boolean }
```

### JWT Token è®¾è®¡

```typescript
// Token payload
{
  sub: "user_uuid",      // ç”¨æˆ·ID
  email: "user@example.com",
  iat: 1645000000,       // ç­¾å‘æ—¶é—´
  exp: 1645096400,       // è¿‡æœŸæ—¶é—´ï¼ˆ7å¤©ï¼‰
  premium: false         // æ˜¯å¦ä»˜è´¹ç”¨æˆ·
}
```

---

## ğŸ’° å˜ç°ç³»ç»Ÿæ¶æ„

### å˜ç°ç­–ç•¥çŸ©é˜µ

| ç­–ç•¥ | å®ç°éš¾åº¦ | æ”¶å…¥æ½œåŠ› | ä¼˜å…ˆçº§ | å®æ–½é˜¶æ®µ |
|------|----------|----------|--------|----------|
| **Lifetime Deal** | â­â­ | â­â­â­â­â­ | P0 | é˜¶æ®µ1 |
| **Freemiumè®¢é˜…** | â­â­â­ | â­â­â­â­ | P1 | é˜¶æ®µ2 |
| **å¹¿å‘Š(AdSense)** | â­ | â­â­ | P2 | é˜¶æ®µ3 |
| **B2Bæ•™è‚²æˆæƒ** | â­â­â­â­ | â­â­â­â­â­ | P2 | é˜¶æ®µ4 |

### 1. Lifetime Deal ç­–ç•¥

**å®šä»·ï¼š**
- Early Bird: $19 (å‰100å)
- Regular: $29
- Pro: $49 (åŒ…å«æ‰€æœ‰æœªæ¥åŠŸèƒ½)

**å®ç°ï¼š**
```typescript
// è´­ä¹°æµç¨‹
1. ç”¨æˆ·ç‚¹å‡»"Buy Lifetime" â†’ Stripe Checkout
2. æ”¯ä»˜æˆåŠŸ â†’ Stripe webhook â†’ æ›´æ–°user.is_premium = true
3. ç”¨æˆ·è·å¾—æ°¸ä¹…Proæƒé™
```

**Stripeäº§å“é…ç½®ï¼š**
```json
{
  "product": {
    "name": "Lang-Learn Lifetime",
    "description": "Lifetime access to all features"
  },
  "price": {
    "unit_amount": 2900, // $29.00
    "currency": "usd",
    "type": "one_time"
  }
}
```

### 2. Freemium ç­–ç•¥

**åˆ†å±‚è®¾è®¡ï¼š**

```typescript
const TIERS = {
  free: {
    name: 'Free',
    price: 0,
    features: {
      daily_generations: 10,
      max_favorites: 100,
      contexts: ['æ—¥å¸¸å¯¹è¯', 'å·¥ä½œåœºæ™¯', 'æƒ…æ„Ÿè¡¨è¾¾'],
      export_formats: ['text'],
      support: 'community'
    }
  },
  pro: {
    name: 'Pro',
    price: 3, // $3/month
    features: {
      daily_generations: 100,
      max_favorites: 1000,
      contexts: 'all', // å…¨éƒ¨5ç§
      export_formats: ['text', 'anki', 'csv'],
      support: 'email',
      beta_features: true
    }
  },
  premium: {
    name: 'Premium',
    price: 8, // $8/month
    features: {
      daily_generations: 'unlimited',
      max_favorites: 'unlimited',
      contexts: 'all',
      export_formats: ['text', 'anki', 'csv', 'pdf'],
      support: 'priority',
      beta_features: true,
      custom_themes: true
    }
  }
};
```

**é™é¢æ£€æŸ¥ä¸­é—´ä»¶ï¼š**
```typescript
// middleware.ts
export async function middleware(req: NextRequest) {
  const user = await getUserFromToken(req);
  
  if (!user.is_premium) {
    const todayUsage = await getTodayUsage(user.id);
    if (todayUsage >= 10) {
      return new Response('Daily limit reached', { status: 429 });
    }
  }
}
```

### 3. å¹¿å‘Šç­–ç•¥

**å®ç°ï¼š**
```typescript
// å…è´¹ç”¨æˆ·æ˜¾ç¤ºå¹¿å‘Š
const AdBanner = () => {
  const { user } = useAuth();
  
  if (user?.is_premium) return null; // ä»˜è´¹ç”¨æˆ·ä¸æ˜¾ç¤º
  
  return (
    <ins className="adsbygoogle"
         style={{ display: 'block' }}
         data-ad-client="ca-pub-XXXXXXXX"
         data-ad-slot="XXXXXXXX"
         data-ad-format="auto"
         data-full-width-responsive="true">
    </ins>
  );
};
```

**æ”¶å…¥é¢„ä¼°ï¼š**
- æ—¥ PV 5000 â†’ æœˆæ”¶ ~$200-300 USD
- éœ€è¦6-12ä¸ªæœˆSEOæ‰èƒ½è¾¾åˆ°

---

## ğŸ“Š æˆæœ¬åˆ†æ

### æœˆåº¦è¿è¥æˆæœ¬

| æœåŠ¡ | è´¹ç”¨ | è¯´æ˜ |
|------|------|------|
| Vercel Pro | $20 | æ‰˜ç®¡ + Analytics |
| Supabase Pro | $25 | æ•°æ®åº“ (100ä¸‡è¡Œ) |
| Resend | $0 | å…è´¹3000å°/æœˆ |
| OpenRouter | ~$20 | æŒ‰é‡ä»˜è´¹ |
| Stripe | $0 | æ‰‹ç»­è´¹ä»æ”¶å…¥æ‰£ |
| **æ€»è®¡** | **~$65 USD** | **~$500 HKD** |

### ç›ˆäºå¹³è¡¡ç‚¹

```
æˆæœ¬: $65 USD/month â‰ˆ $500 HKD/month
ç›®æ ‡æ”¶å…¥: $385-640 USD/month â‰ˆ 3000-5000 HKD/month
å‡€åˆ©æ¶¦: $320-575 USD/month

éœ€è¦ä»˜è´¹ç”¨æˆ·:
- Lifetime: 2-3ä¸ª/æœˆ æˆ–
- è®¢é˜…: 130ä¸ª@$3/æœˆ æˆ– 65ä¸ª@$5/æœˆ
```

---

## ğŸ› ï¸ å®ç°è·¯çº¿å›¾

### é˜¶æ®µ1ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰

**Week 1-2: æ”¶è—ç³»ç»Ÿ**
- [ ] Supabase æ•°æ®åº“è®¾ç½®
- [ ] æ”¶è—CRUD API
- [ ] å‰ç«¯æ”¶è—UI
- [ ] Ankiå¯¼å‡ºåŠŸèƒ½

**Week 3: ç™»å½•ç³»ç»Ÿ**
- [ ] Resendé‚®ä»¶é›†æˆ
- [ ] éªŒè¯ç API
- [ ] JWTè®¤è¯
- [ ] ç™»å½•UI

**äº¤ä»˜ï¼š** ç”¨æˆ·å¯ä»¥æ³¨å†Œã€ç™»å½•ã€æ”¶è—ä¾‹å¥

### é˜¶æ®µ2ï¼šå˜ç°å‡†å¤‡ï¼ˆ2å‘¨ï¼‰

**Week 4-5: æ”¯ä»˜ç³»ç»Ÿ**
- [ ] Stripeé›†æˆ
- [ ] äº§å“/å®šä»·é…ç½®
- [ ] è®¢é˜…ç®¡ç†
- [ ] ä»˜è´¹å¢™é€»è¾‘

**äº¤ä»˜ï¼š** å¯ä»¥æ¥å—ä»˜è´¹

### é˜¶æ®µ3ï¼šäº§å“å‘å¸ƒï¼ˆ1-2å‘¨ï¼‰

**Week 6-7: å‘å¸ƒå‡†å¤‡**
- [ ] Landing Pageä¼˜åŒ–
- [ ] Product Huntå‡†å¤‡
- [ ] æ–‡æ¡£/FAQ
- [ ] ç”¨æˆ·åé¦ˆæ¸ é“

**äº¤ä»˜ï¼š** æ­£å¼å‘å¸ƒï¼Œå¼€å§‹è·å®¢

### é˜¶æ®µ4ï¼šå¢é•¿ä¼˜åŒ–ï¼ˆæŒç»­ï¼‰

- [ ] SEOå†…å®¹è¥é”€
- [ ] ç”¨æˆ·åé¦ˆè¿­ä»£
- [ ] æ¨èç³»ç»Ÿï¼ˆé‚€è¯·è¿”åˆ©ï¼‰
- [ ] B2Bé”€å”®

---

## ğŸ” å®‰å…¨è€ƒè™‘

### 1. APIé™æµ
```typescript
// rate limiter
import { Ratelimit } from '@upstash/ratelimit';

const ratelimit = new Ratelimit({
  redis: Redis.fromEnv(),
  limiter: Ratelimit.slidingWindow(10, '1 m'), // æ¯åˆ†é’Ÿ10æ¬¡
});
```

### 2. æ•°æ®ä¿æŠ¤
- æ‰€æœ‰APIå¯ç”¨HTTPS
- æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- å®šæœŸå¤‡ä»½Supabase

### 3. éšç§åˆè§„
- GDPR: æä¾›æ•°æ®å¯¼å‡º/åˆ é™¤åŠŸèƒ½
- éšç§æ”¿ç­–é¡µé¢
- Cookie consent

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æ—¶é—´ç‚¹ |
|------|--------|--------|
| æ—¥æ´»ç”¨æˆ· | 100 | æœˆ1 |
| æ³¨å†Œç”¨æˆ· | 1000 | æœˆ3 |
| ä»˜è´¹ç”¨æˆ· | 50 | æœˆ3 |
| æœˆæ”¶å…¥ | $300 USD | æœˆ3 |
| æœˆæ”¶å…¥ | $1000 USD | æœˆ6 |

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ä»Šå¤©å¯ä»¥åšçš„ï¼š**
1. åˆ›å»ºSupabaseé¡¹ç›®
2. è®¾ç½®Resendè´¦æˆ·
3. ç”³è¯·Stripeè´¦æˆ·

**è¿™å‘¨è¦åšçš„ï¼š**
1. å®ç°æ”¶è—åŠŸèƒ½
2. å®ç°é‚®ä»¶ç™»å½•
3. å‡†å¤‡Product Huntå‘å¸ƒææ–™

**éœ€è¦æˆ‘å¸®ä½ å†™å“ªä¸ªéƒ¨åˆ†çš„ä»£ç ï¼Ÿ**
- A. Supabaseæ•°æ®åº“schema
- B. é‚®ä»¶ç™»å½•API
- C. Stripeæ”¯ä»˜é›†æˆ
- D. å‰ç«¯æ”¶è—UI
